<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
	<head>
		<title>Zekai Pereira Shen | Software Tutorials</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link href="assets/css/loader.css" rel="stylesheet">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<point><link rel="stylesheet" href="assets/css/point.css" /></point>
	</head>
	<body class="is-preload">
			<div id="loader">
				<div aria-busy="true" aria-label="Loading" role="progressbar" class="loader-container">
					<div class="swing">
						<div class="swing-l"></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div class="swing-r"></div>
					</div>
					<div class="loader-shadow">
						<div class="shadow-l"></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div></div>
						<div class="shadow-r"></div>
					</div>
				</div>
			</div>
			<div id="wrapper" class="fade-in">
				<div class="bubbles">
					<span style="--i:11;"></span>
					<span style="--i:12;"></span>
					<span style="--i:24;"></span>
					<span style="--i:10;"></span>
					<span style="--i:14;"></span>
			  		<span style="--i:23;"></span>
			  		<span style="--i:18;"></span>
			  		<span style="--i:16;"></span>
			  		<span style="--i:19;"></span>
			  		<span style="--i:20;"></span>
			  		<span style="--i:22;"></span>
			  		<span style="--i:25;"></span>
			  		<span style="--i:18;"></span>
			  		<span style="--i:21;"></span>
			  		<span style="--i:15;"></span>
			  		<span style="--i:13;"></span>
			  		<span style="--i:26;"></span>
			  		<span style="--i:17;"></span>
			  		<span style="--i:13;"></span>
			  		<span style="--i:28;"></span>
			  		<span style="--i:16;"></span>
			  		<span style="--i:18;"></span>
			  		<span style="--i:29;"></span>
			  		<span style="--i:11;"></span>
			  		<span style="--i:15;"></span>
			  		<span style="--i:24;"></span>
			  		<span style="--i:19;"></span>
			  		<span style="--i:12;"></span>
			  		<span style="--i:27;"></span>
			  		<span style="--i:32;"></span>
			  		<span style="--i:22;"></span>
			  		<span style="--i:25;"></span>
			  		<span style="--i:18;"></span>
					<span style="--i:12;"></span>
					<span style="--i:27;"></span>
					<span style="--i:32;"></span>
					<span style="--i:22;"></span>
					<span style="--i:25;"></span>
					<span style="--i:18;"></span>
					<span style="--i:32;"></span>
					<span style="--i:22;"></span>
					<span style="--i:25;"></span>
					<span style="--i:18;"></span>
					<span style="--i:22;"></span>
					<span style="--i:25;"></span>
					<span style="--i:18;"></span>
					<span style="--i:32;"></span>
					<span style="--i:22;"></span>
					<span style="--i:25;"></span>
					<span style="--i:18;"></span>
					<span style="--i:28;"></span>
					<span style="--i:16;"></span>
					<span style="--i:18;"></span>
					<span style="--i:29;"></span>
					<span style="--i:11;"></span>
					<span style="--i:15;"></span>
					<span style="--i:24;"></span>
					<span style="--i:19;"></span>
				</div>
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Rosetta</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Integration Of Notes</a></li>
							<li class="active"><a href="generic.html">Software Tutorials</a></li>
							<!-- <li><a href="elements.html">Elements Reference</a></li> -->
						</ul>
						<ul class="icons">
							<li><a href="https://twitter.com/Pereira_Shen?s=09" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="https://www.instagram.com/chrisnapire/" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="https://www.instagram.com/chrisnapire/" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="https://github.com/CondaPereira" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">November 21, 2022</span>
									<h1>Rosetta<br />
									Scripts Basis</h1>
									<p>This is a outline tutorial about rosetta scripts which will contain<br />
									some modules such as Minimization, Packing, Filter and so on, and we can use<br />
									the Filter module to evaluate the properties of structures and manage the working progress.</p>
								</header>
								<div class="image main"><img src="images/rosetta.png" alt="" /></div>
								<h2>1.Inuput file formation</h2>
								<p>Before you use the rosetta scripts to design a protein, you can use the command below to generate a template scripts:</p>
								<pre><code>
rosetta_scripts.graphicsmpi.linuxgccrelease > Temp.xml
# you can use compile the graphics version to view the protein optimization progress
								</code></pre>
								<p>and then you can get a template scripts just like this as follows:</p>
								<pre><code>
&lt;ROSETTASCRIPTS&gt;
	&lt;SCOREFXNS&gt;
	&lt;/SCOREFXNS&gt;
	&lt;RESIDUE_SELECTORS&gt;
	&lt;/RESIDUE_SELECTORS&gt;
	&lt;PACKER_PALETTES&gt;
	&lt;/PACKER_PALETTES&gt;
	&lt;TASKOPERATIONS&gt;
	&lt;/TASKOPERATIONS&gt;
	&lt;MOVE_MAP_FACTORIES&gt;
	&lt;/MOVE_MAP_FACTORIES&gt;
	&lt;SIMPLE_METRICS&gt;
	&lt;/SIMPLE_METRICS&gt;
	&lt;FILTERS&gt;
	&lt;/FILTERS&gt;
	&lt;MOVERS&gt;
	&lt;/MOVERS&gt;
	&lt;PROTOCOLS&gt;
	&lt;/PROTOCOLS&gt;
	&lt;OUTPUT /&gt;
&lt;/ROSETTASCRIPTS&gt;
								</code></pre>
								<p>and we can find that the style format <b>"ROSETTA-SCRIPTS/ROSETTA-SCRIPTS"</b> is equal to the format <b>"ROSETTA-SCRIPTS PLUS CONTENTS"</b>, and the title of every part or section will not be under analysis, if you'd written some scripts about improving some aspects of the protein such as the side chain or repair the loop structure. and then we can choose the output score function results just use the commands below:</p>
								<pre><code>
&lt;OUTPUT scorefxn=&quot;r15&quot;&gt;
# and the scorefuntion which will include molechem(inside evalution) or ref2015(which i think is too old).
								</code></pre>
								<p>if you want to call the <b>molchem</b> or <b>ref2015</b> score function module, you should define the concepts before the location of the <b>&lt;OUTPUT /&gt;</b> in the <b>&lt;SCOREFXNS /&gt;</b> , just like follows:</p>
								<pre><code>
...
&lt;ScoreFunction name=&quot;molmech&quot; weights=&quot;mm_std_fa_elec_dslf_fa13&quot; /&gt;
        &lt;ScoreFunction name=&quot;r15_cart&quot; weights=&quot;ref2015&quot; &gt;
            &lt;Reweight scoretype=&quot;pro_close&quot; weight=&quot;0.0&quot; /&gt;
            &lt;Reweight scoretype=&quot;cart_bonded&quot; weight=&quot;0.625&quot; /&gt;
        &lt;/ScoreFunction&gt;
&lt;/ScoreFunction&gt;
...
...
&lt;OUTPUT scorefxn=&quot;r15_cart&quot; /&gt;
# and two kind of the scorefunction cannot exist in the same time, so you'd better choose a valid scorefunction for a certain protein system.
&lt;OUTPUT scorefxn=&quot;molmech&quot; /&gt;
...
								</code></pre>
								<p>and you can point out how many protein structures you want to generate once or view the protein structure optimization progress, commonly, you can run this command below:</p>
								<pre><code>
mpirun -np 8 rosetta_scripts.graphicsmpi.linuxgccrelease -s 1ubq.pdb -parser:protocol scoring.xml -parser:view -out:prefix scoring_r15_(or scoring_molmech_)
								</code></pre>
								<h2>2.Movers and Structures Optimization</h2>
								<p>MOVERS is the main body of the XML script, which can change the structure from multiple aspects, such as <b>atomic coordinates</b>, <b>Foldtree</b>, <b>restricted conditions</b>, <b>sequences</b> or <b>covalent connections</b>. Next, i will introduce the minimization module, packing module, and trRosettaProtocol module.</p>
							</section>
							<footer>
								<div class="pagination">
								<!--<a href="#" class="previous">Prev</a>-->
									<a href="index.html" class="page active">1</a>
									<a href="generic.html" class="page">2</a>
								<!--<a href="#" class="page">3</a>
                                <span class="extra">&hellip;</span>
                                <a href="#" class="page">8</a>
                                <a href="#" class="page">9</a>
                                <a href="#" class="page">10</a> -->
									<span class="extra">&hellip;</span>
									<a href="#" class="next">Next</a>
								</div>
							</footer>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<section>
							<form method="post" action="#">
								<div class="fields">
									<div class="field">
										<label for="name">Name</label>
										<input type="text" name="name" id="name" />
									</div>
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="email" />
									</div>
									<div class="field">
										<label for="message">Message</label>
										<textarea name="message" id="message" rows="3"></textarea>
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Send Message" /></li>
								</ul>
							</form>
						</section>
						<section class="split contact">
							<section class="alt">
								<h3>Address</h3>
								<p>China Pharmaceutical University<br />
									Nanjing Province Region China</p>
							</section>
							<section>
								<h3>Phone</h3>
								<p><a href="#">+86 15895906997</a></p>
							</section>
							<section>
								<h3>Email</h3>
								<p><a href="#">szkchris@sina.com</a></p>
							</section>
							<section>
								<h3>Social</h3>
								<ul class="icons alt">
									<li><a href="https://twitter.com/Pereira_Shen?s=09" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="https://www.instagram.com/chrisnapire/" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="https://www.instagram.com/chrisnapire/" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="https://github.com/CondaPereira" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</section>
						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/loader.js"></script>

				<script>
					function clickEffect() {
						let balls = [];
						let longPressed = false;
						let longPress;
						let multiplier = 0;
						let width, height;
						let origin;
						let normal;
						let ctx;
						const colours = ["#F73859", "#14FFEC", "#00E0FF", "#FF99FE", "#FAF15D"];
						const canvas = document.createElement("canvas");
						document.body.appendChild(canvas);
						canvas.setAttribute("style", "width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;");
						const pointer = document.createElement("span");
						pointer.classList.add("pointer");
						document.body.appendChild(pointer);

						if (canvas.getContext && window.addEventListener) {
							ctx = canvas.getContext("2d");
							updateSize();
							window.addEventListener('resize', updateSize, false);
							loop();
							window.addEventListener("mousedown", function(e) {
								pushBalls(randBetween(10, 20), e.clientX, e.clientY);
								document.body.classList.add("is-pressed");
								longPress = setTimeout(function(){
									document.body.classList.add("is-longpress");
									longPressed = true;
								}, 500);
							}, false);
							window.addEventListener("mouseup", function(e) {
								clearInterval(longPress);
								if (longPressed == true) {
									document.body.classList.remove("is-longpress");
									pushBalls(randBetween(50 + Math.ceil(multiplier), 100 + Math.ceil(multiplier)), e.clientX, e.clientY);
									longPressed = false;
								}
								document.body.classList.remove("is-pressed");
							}, false);
							window.addEventListener("mousemove", function(e) {
								let x = e.clientX;
								let y = e.clientY;
								pointer.style.top = y + "px";
								pointer.style.left = x + "px";
							}, false);
						} else {
							console.log("canvas or addEventListener is unsupported!");
						}


						function updateSize() {
							canvas.width = window.innerWidth * 2;
							canvas.height = window.innerHeight * 2;
							canvas.style.width = window.innerWidth + 'px';
							canvas.style.height = window.innerHeight + 'px';
							ctx.scale(2, 2);
							width = (canvas.width = window.innerWidth);
							height = (canvas.height = window.innerHeight);
							origin = {
								x: width / 2,
								y: height / 2
							};
							normal = {
								x: width / 2,
								y: height / 2
							};
						}
						class Ball {
							constructor(x = origin.x, y = origin.y) {
								this.x = x;
								this.y = y;
								this.angle = Math.PI * 2 * Math.random();
								if (longPressed == true) {
									this.multiplier = randBetween(14 + multiplier, 15 + multiplier);
								} else {
									this.multiplier = randBetween(6, 12);
								}
								this.vx = (this.multiplier + Math.random() * 0.5) * Math.cos(this.angle);
								this.vy = (this.multiplier + Math.random() * 0.5) * Math.sin(this.angle);
								this.r = randBetween(8, 12) + 3 * Math.random();
								this.color = colours[Math.floor(Math.random() * colours.length)];
							}
							update() {
								this.x += this.vx - normal.x;
								this.y += this.vy - normal.y;
								normal.x = -2 / window.innerWidth * Math.sin(this.angle);
								normal.y = -2 / window.innerHeight * Math.cos(this.angle);
								this.r -= 0.3;
								this.vx *= 0.9;
								this.vy *= 0.9;
							}
						}

						function pushBalls(count = 1, x = origin.x, y = origin.y) {
							for (let i = 0; i < count; i++) {
								balls.push(new Ball(x, y));
							}
						}

						function randBetween(min, max) {
							return Math.floor(Math.random() * max) + min;
						}

						function loop() {
							ctx.fillStyle = "rgba(255, 255, 255, 0)";
							ctx.clearRect(0, 0, canvas.width, canvas.height);
							for (let i = 0; i < balls.length; i++) {
								let b = balls[i];
								if (b.r < 0) continue;
								ctx.fillStyle = b.color;
								ctx.beginPath();
								ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2, false);
								ctx.fill();
								b.update();
							}
							if (longPressed == true) {
								multiplier += 0.2;
							} else if (!longPressed && multiplier >= 0) {
								multiplier -= 0.4;
							}
							removeBall();
							requestAnimationFrame(loop);
						}

						function removeBall() {
							for (let i = 0; i < balls.length; i++) {
								let b = balls[i];
								if (b.x + b.r < 0 || b.x - b.r > width || b.y + b.r < 0 || b.y - b.r > height || b.r < 0) {
									balls.splice(i, 1);
								}
							}
						}
					}
					clickEffect();//调用特效函数
				</script>
	</body>
</html>